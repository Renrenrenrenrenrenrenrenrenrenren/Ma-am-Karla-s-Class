<p style="color: green"><%= notice %></p>

<% content_for :title, "Guardians" %>

<h1>Guardians</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Contact Number</th>        
      <th>Students & Relation</th>
      <th>Show</th>
    </tr>
  </thead>
  <tbody>
    <% @guardians.each do |guardian| %>
      <tr>
        <td><%= guardian.name %></td>
        <td><%= guardian.email_address %></td>
        <td><%= guardian.contact_number %></td>
        <td>
          <% if guardian.relationships.any? %>
            <% guardian.relationships.each do |rel| %>
              <div>
                <%= rel.student.name %> â€“ <%= rel.relation.presence || "No relation specified" %>
              </div>
            <% end %>
          <% else %>
            <em>No students assigned</em>
          <% end %>
        </td>
        <td><%= link_to "Show this guardian", guardian %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "New guardian", new_guardian_path %>
